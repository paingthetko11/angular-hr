<p-confirm-dialog></p-confirm-dialog>

<div class="card">


    <p-table #dt1 [value]="jobopenings" dataKey="id" [paginator]="true" selectionMode="single"
        [(selection)]="selectedJobOpening" [rows]="10" [rowsPerPageOptions]="[5, 10, 20]" [globalFilterFields]="[
        'id','companyName'
      ]" [tableStyle]="{ 'min-width': '50rem' }">

        <ng-template #caption>
            <div class="flex items-center justify-between mb-3 gap-3 flex-wrap">
                <!-- Button Wrapper -->
                
                    <p-splitButton label="Create" icon="pi pi-plus" [model]="items" (onClick)="create()"
                        severity="success"></p-splitButton>

                <p-iconfield iconPosition="left" class="ml-auto w-full sm:w-80 md:w-96">
                    <p-inputicon class="pl-2">
                        <i class="pi pi-search text-gray-400"></i>
                    </p-inputicon>
                    <input pInputText type="text" (input) ="dt1.filterGlobal($any($event.target).value, 'contains')"
                        placeholder="Search keyword"
                        class="w-full px-10 py-2 border border-gray-300 rounded-lg focus:outline-none" />
                </p-iconfield>
                
            </div>
        </ng-template>

        <ng-template #header>
            <tr style="white-space:nowrap">
                <th>#</th>
                <th pSortableColumn="id">
                    ID <p-sortIcon field="id" />
                </th>
                <th pSortableColumn="title">
                    Title<p-sortIcon field="title" />
                </th>
                <th pSortableColumn="description">
                    Description<p-sortIcon field="description" />
                </th>
                <th pSortableColumn="noOfApplicants">
                    noOfApplicants<p-sortIcon field="noOfApplicants" />
                </th>
                <th pSortableColumn="startOn">
                    StartOn<p-sortIcon field="startOn" />
                </th>
                <th pSortableColumn="endOn">
                    End On
                    <p-sortIcon field="endOn" />
                </th>
                <th pSortableColumn="companyId">
                    CompanyID<p-sortIcon field="companyId" />
                </th>
                <th pSortableColumn="branchId">
                    BranchID
                    <p-sortIcon field="branchId" />
                </th>
                <th pSortableColumn="deptId">
                    DeptID<p-sortIcon field="deptId" />
                </th>
                <th pSortableColumn="deptId">
                    PositionID<p-sortIcon field="deptId" />
                </th>
                <th pSortableColumn="openingStatus">
                    Opening Status<p-sortIcon field="openingStatus" />
                </th>
                <th pSortableColumn="createdOn">
                    Created On<p-sortIcon field="createdOn" />
                </th>
                <th pSortableColumn="createdBy">
                    Created By<p-sortIcon field="createdBy" />
                </th>
                <th pSortableColumn="updatedOn">
                    Updated On<p-sortIcon field="updatedOn" />
                </th>
                <th pSortableColumn="updatedBy">
                    updated By<p-sortIcon field="updaetdBy" />
                </th>
                <th pSortableColumn="deletedOn">
                    Deleted On <p-sortIcon field="deletedOn" />
                </th>
                <th pSortableColumn="deletedBy">
                    Deleted By <p-sortIcon field="deletedBy" />
                </th>
                <th pSortableColumn="remark">
                    Remark<p-sortIcon field="remark" />
                </th>
                <th>Action</th>

            </tr>
        </ng-template>

        <ng-template #body let-jobopening>
            <tr [pSelectableRow]="jobopening" style="white-space:nowrap">
                <td>
                    <span class="pi pi-circle" [class.pi-check-circle]="selectedJobOpening === jobopening"></span>
                </td>
                <td>{{ jobopening.id }}</td>
                <td>{{ jobopening.title }}</td>
                <td>
                    <div [innerHTML]="jobopening.description"></div>
                </td>
                <td>{{ jobopening.noOfApplicants }}</td>
                <td>{{ jobopening.startOn }}</td>
                <td>{{ jobopening.endOn }}</td>
                <td>{{ jobopening.companyId }}</td>
                <td>{{ jobopening.companyName }}</td>
                <td>{{ jobopening.branchId }}</td>
                <td>{{ jobopening.deptId }}</td>
                <td>{{ jobopening.positionId }}</td>

                <td>
                    <p-tag value="{{ jobopening.openingStatus? 'Active' : 'Inactive' }}" [severity]="jobopening.openingStatus ? 'success' : 'info'
                    " icon="{{ jobopening.openingStatus? 'pi pi-check' : 'pi pi-minus-circle' }}"
                        [rounded]="true"></p-tag>
                </td>
                <td>{{ jobopening.createdOn | date: 'dd/MMM/yyyy hh:mm:ss a'}}</td>
                <td>{{ jobopening.createdBy }}</td>
                <td>{{ jobopening.updatedOn | date: 'dd/MMM/yyyy hh:mm:ss a'}}</td>
                <td>{{ jobopening.updatedBy }}</td>
                <td>{{ jobopening.deletedOn | date: 'dd/MMM/yyyy hh:mm:ss a'}}</td>
                <td>{{ jobopening.deletedBy }}</td>
                <td>{{ jobopening.remark }}</td>

            </tr>


        </ng-template>

        <ng-template #emptymessage>
            <tr>
                <td colspan="3">No departments found.</td>
            </tr>
        </ng-template>
    </p-table>
</div>
<p-confirmDialog [breakpoints]="{
    '1920px': '30vw',
    '1440px': '30vw',
    '1024px': '30vw',
    '768px': '80vw',           
    '425px': '100vw',
    '375px': '100vw',
    '320px': '100vw'}" [style]="{ width: '30vw' }" key="jobOpeningDialog" position="bottom"
    rejectButtonStyleClass="p-button-outlined"></p-confirmDialog>