<div class="card">
    <p-table #dt1 [value]="allowances" dataKey="allowanceId" [paginator]="true" [rows]="10"
        [rowsPerPageOptions]="[5, 10, 20]" [globalFilterFields]="[
        'allowanceId',
      ]" [tableStyle]="{ 'min-width': '50rem' }">
        <ng-template #caption>
            <div class="flex">
                <p-button label="Create" routerLink="entry"><i class="pi pi-plus"></i></p-button>
                <p-iconfield iconPosition="left" class="ml-auto ">
                    <p-inputicon>
                        <i class="pi pi-search"></i>
                    </p-inputicon>
                    <input pInputText type="text" placeholder="Search keyword" />
                </p-iconfield>
            </div>
        </ng-template>

        <ng-template #header>
            <tr style="white-space:nowrap">
                <th pSortableColumn="allowanceId">
                    AllowanceID <p-sortIcon field="allowanceId" />
                </th>
                <th pSortableColumn="companyId">
                    CompanyID<p-sortIcon field="companyId" />
                </th>
                <th pSortableColumn="companyName">
                    Company<p-sortIcon field="companyName" />
                </th>
                <th pSortableColumn="branchId">
                    BranchID

                    <p-sortIcon field="branchId" />
                </th>
                <th pSortableColumn="deptId">
                    DeptID<p-sortIcon field="deptId" />
                </th>
                <th pSortableColumn="deptId">
                    PositionID<p-sortIcon field="deptId" />
                </th>
                <th pSortableColumn="companyId">
                    AllowanceName<p-sortIcon field="companyId" />
                </th>
                <th pSortableColumn="description">
                    Description<p-sortIcon field="description" />
                </th>
                <th pSortableColumn="status">
                    Status<p-sortIcon field="status" />
                </th>
                <th pSortableColumn="createdOn">
                    Created On<p-sortIcon field="createdOn" />
                </th>
                <th pSortableColumn="createdBy">
                    Created By<p-sortIcon field="createdBy" />
                </th>
                <th pSortableColumn="updatedOn">
                    Updated On<p-sortIcon field="updatedOn" />
                </th>
                <th pSortableColumn="updatedBy">
                    updated By<p-sortIcon field="updaetdBy" />
                </th>
                <th pSortableColumn="deletedOn">
                    Deleted On <p-sortIcon field="deletedOn" />
                </th>
                <th pSortableColumn="deletedBy">
                    Deleted By <p-sortIcon field="deletedBy" />
                </th>
                <th pSortableColumn="remark">
                    Remark<p-sortIcon field="remark" />
                </th>
                <th>Action</th>

            </tr>

            <tr>
                <th>
                    <p-columnFilter type="text" field="allowanceId" placeholder="Search by ID"
                        ariaLabel="Filter ID"></p-columnFilter>
                </th>
                <th>
                    <p-columnFilter type="text" field="companyId" placeholder="Search by Id"
                        ariaLabel="Filter Name"></p-columnFilter>
                </th>
                <th>
                    <p-columnFilter type="text" field="companyName" placeholder="Search by Name"
                        ariaLabel="Filter Name"></p-columnFilter>
                </th>
                <th>
                    <p-columnFilter type="text" field="branchId" placeholder="Search by Id"
                        ariaLabel="Filter Id"></p-columnFilter>
                </th>
                <th>
                    <p-columnFilter type="text" field="deptId" placeholder="Search by Id"
                        ariaLabel="Filter Id"></p-columnFilter>
                </th>
                <th>
                    <p-columnFilter type="text" field="positionId" placeholder="Search by Id"
                        ariaLabel="Filter Id"></p-columnFilter>
                </th>
                <th>
                    <p-columnFilter type="text" field="allowanceName" placeholder="Search by Name"
                        ariaLabel="Filter Id"></p-columnFilter>
                </th>
            </tr>
        </ng-template>

        <ng-template #body let-allowance>
            <tr style="white-space:nowrap">
                <td>{{ allowance.allowanceId }}</td>
                <td>{{ allowance.companyId }}</td>
                <td>{{ allowance.companyName }}</td>
                <td>{{ allowance.branchId }}</td>
                <td>{{ allowance.deptId }}</td>
                <td>{{ allowance.positionId }}</td>
                <td>{{ allowance.allowanceName }}</td>
                <td>
                    <div [innerHTML]="allowance.description"></div>
                </td>
                <td>
                    <p-tag value="{{ allowance.status? 'Active' : 'Inactive' }}" [severity]="allowance.status ? 'success' : 'info'
                    " icon="{{ allowance.status? 'pi pi-check' : 'pi pi-minus-circle' }}" [rounded]="true"></p-tag>
                </td>
                <td>{{ allowance.createdOn | date: 'dd/MMM/yyyy hh:mm:ss a'}}</td>
                <td>{{ allowance.createdBy }}</td>
                <td>{{ allowance.updatedOn | date: 'dd/MMM/yyyy hh:mm:ss a'}}</td>
                <td>{{ allowance.updatedBy }}</td>
                <td>{{ allowance.deletedOn | date: 'dd/MMM/yyyy hh:mm:ss a'}}</td>
                <td>{{ allowance.deletedBy }}</td>
                <td>{{ allowance.remark }}</td>
                <td class="flex flex-row gap-2">
                    <p-button (onClick)="update(allowance)"><i class="pi pi-user-edit"></i>Edit</p-button>
                    <p-button (onClick)="delete(allowance)"><i class="pi pi-times"></i>Delete</p-button>
                </td>
            </tr>
        </ng-template>

        <ng-template #emptymessage>
            <tr>
                <td colspan="3">No departments found.</td>
            </tr>
        </ng-template>
    </p-table>
</div>

<div class="container mx-auto mt-12 p-6 bg-gray-100 rounded-lg shadow-md">
    <h2 class="text-2xl font-bold text-center mb-6 text-indigo-600">Cookie Testing</h2>
  
    <!-- Input Fields -->
    <div class="form-group text-center mb-6">
      <label for="inputKey" class="block text-lg font-medium text-gray-700 mb-2">Enter Cookie Key:</label>
      <input
        id="inputKey"
        [(ngModel)]="inputKey"
        type="text"
        class="form-control w-full md:w-1/2 mx-auto px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"
        placeholder="Enter a unique key for the cookie"
      />
    </div>
    <div class="form-group text-center mb-6">
      <label for="inputValue" class="block text-lg font-medium text-gray-700 mb-2">Enter Cookie Value:</label>
      <input
        id="inputValue"
        [(ngModel)]="inputValue"
        type="text"
        class="form-control w-full md:w-1/2 mx-auto px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"
        placeholder="Enter a value to save in the cookie"
      />
    </div>
  
    <!-- Buttons -->
    <div class="flex flex-wrap justify-center gap-4 mb-6">
      <p-button
        class="px-6 py-2 rounded-lg"
        (click)="saveCookie()"
        label="Save Cookie"
        severity="success"
      ></p-button>
      <p-button
        class="px-6 py-2 rounded-lg"
        (click)="clearAllCookies()"
        label="Clear All Cookies"
        severity="danger"
      ></p-button>
    </div>
  
    <!-- Display All Cookies -->
    <div class="text-center">
      <h3 class="text-lg font-medium text-gray-700 mb-4">Saved Cookies:</h3>
      <table class="table-auto w-full md:w-1/2 mx-auto border-collapse border border-gray-300">
        <thead>
          <tr>
            <th class="border border-gray-300 px-4 py-2">Key</th>
            <th class="border border-gray-300 px-4 py-2">Value</th>
            <th class="border border-gray-300 px-4 py-2">Status</th>
            <th class="border border-gray-300 px-4 py-2">Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let cookie of cookies">
            <td class="border border-gray-300 px-4 py-2">{{ cookie.key }}</td>
            <td class="border border-gray-300 px-4 py-2">{{ cookie.value }}</td>
            <td class="border border-gray-300 px-4 py-2">
              {{ cookie.value === 'Expired' ? 'Expired' : 'Valid' }}
            </td>
            <td class="border border-gray-300 px-4 py-2">
              <p-button
                class="px-4 py-2 rounded-lg"
                (click)="deleteCookie(cookie.key)"
                label="Delete"
                severity="danger"
              ></p-button>
            </td>
          </tr>
          <tr *ngIf="cookies.length === 0">
            <td colspan="3" class="border border-gray-300 px-4 py-2 text-center">No cookies saved.</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>